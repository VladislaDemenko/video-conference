<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Video Conference Room</title>
    <link rel="stylesheet" href="/css/room.css">
    <base href="/">
</head>
<body>
<div class="room-container">
    <!-- Header -->
    <header class="room-header">
        <div class="room-info">
            <h2 id="roomName">üé• –ö–æ–º–Ω–∞—Ç–∞ –≤–∏–¥–µ–æ–∫–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü–∏–∏</h2>
            <div class="participants-count">
                <span id="participantsCount">1</span> —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
            </div>
        </div>
        <div class="room-controls">
            <button id="inviteBtn" class="btn btn-secondary">
                üì® –ü—Ä–∏–≥–ª–∞—Å–∏—Ç—å
            </button>
            <button id="leaveBtn" class="btn btn-danger">
                üö™ –í—ã–π—Ç–∏
            </button>
        </div>
    </header>

    <!-- Main Content -->
    <div class="main-content">
        <!-- Video Section -->
        <div class="video-section">
            <div id="videoGrid" class="video-grid">
                <div class="video-placeholder">
                    <div class="placeholder-icon">üë•</div>
                    <div class="placeholder-text">–£—á–∞—Å—Ç–Ω–∏–∫–∏ –ø–æ—è–≤—è—Ç—Å—è –∑–¥–µ—Å—å</div>
                </div>
            </div>

            <!-- Local Video -->
            <div class="local-video-container">
                <video id="localVideo" autoplay muted playsinline></video>
                <div class="video-info">
                    <span id="videoStatus">üìπ –ö–∞–º–µ—Ä–∞: –í–∫–ª</span>
                    <span id="audioStatus">üé§ –ú–∏–∫—Ä–æ—Ñ–æ–Ω: –í–∫–ª</span>
                </div>
                <div class="video-controls">
                    <button id="toggleVideo" class="control-btn video-active" title="–í–∫–ª—é—á–∏—Ç—å/–≤—ã–∫–ª—é—á–∏—Ç—å –≤–∏–¥–µ–æ">
                        üé•
                    </button>
                    <button id="toggleAudio" class="control-btn audio-active" title="–í–∫–ª—é—á–∏—Ç—å/–≤—ã–∫–ª—é—á–∏—Ç—å –∑–≤—É–∫">
                        üé§
                    </button>
                    <button id="screenShare" class="control-btn" title="–î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è —ç–∫—Ä–∞–Ω–∞">
                        üñ•Ô∏è
                    </button>
                </div>
            </div>
        </div>

        <!-- Sidebar -->
        <div class="sidebar">
            <!-- Participants List -->
            <div class="participants-section">
                <h3>–£—á–∞—Å—Ç–Ω–∏–∫–∏ (<span id="participantsCountHeader">1</span>)</h3>
                <div id="participantsList" class="participants-list">
                    <div class="participant current-user">
                        <span class="username">–í—ã (–ó–∞–≥—Ä—É–∑–∫–∞...)</span>
                        <span class="status connected">üü¢</span>
                    </div>
                </div>
            </div>

            <!-- Chat -->
            <div class="chat-section">
                <h3>–ß–∞—Ç</h3>
                <div id="chatMessages" class="chat-messages">
                    <div class="chat-message system-message">
                        <em>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –∫–æ–º–Ω–∞—Ç—É –≤–∏–¥–µ–æ–∫–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü–∏–∏!</em>
                        <small>–¢–æ–ª—å–∫–æ —á—Ç–æ</small>
                    </div>
                </div>
                <div class="chat-input">
                    <input type="text" id="messageInput" placeholder="–ù–∞–ø–∏—à–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ..." maxlength="500">
                    <button id="sendMessage">üì§ –û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Invite Modal -->
<div id="inviteModal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h3>üì® –ü—Ä–∏–≥–ª–∞—Å–∏—Ç—å –≤ –∫–æ–º–Ω–∞—Ç—É</h3>
            <span class="close">&times;</span>
        </div>
        <div class="modal-body">
            <p class="modal-description">
                –û—Ç–ø—Ä–∞–≤—å—Ç–µ —ç—Ç—É —Å—Å—ã–ª–∫—É –∏–ª–∏ –∫–æ–¥ –¥—Ä—É–∑—å—è–º –∏–ª–∏ –∫–æ–ª–ª–µ–≥–∞–º, —á—Ç–æ–±—ã –æ–Ω–∏ –º–æ–≥–ª–∏ –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è –∫ –≤–∞—à–µ–π –≤–∏–¥–µ–æ–∫–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü–∏–∏
            </p>

            <div class="invite-section">
                <h4>üîó –°—Å—ã–ª–∫–∞ –¥–ª—è –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è:</h4>
                <div class="input-with-button">
                    <input type="text" id="inviteLink" readonly>
                    <button id="copyLink" class="copy-btn">üìã</button>
                </div>
            </div>

            <div class="invite-section">
                <h4>üî¢ –ö–æ–¥ –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è:</h4>
                <div class="input-with-button">
                    <div id="inviteCodeDisplay" class="invite-code-display">
                        –ó–∞–≥—Ä—É–∑–∫–∞...
                    </div>
                    <button id="copyCode" class="copy-btn">üìã</button>
                </div>
                <p class="code-hint">
                    üí° –°–æ–æ–±—â–∏—Ç–µ —ç—Ç–æ—Ç –∫–æ–¥ —É—á–∞—Å—Ç–Ω–∏–∫–∞–º –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è —á–µ—Ä–µ–∑ –≥–ª–∞–≤–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É
                </p>
            </div>

            <div class="success-message">
                <p>‚úÖ –£—á–∞—Å—Ç–Ω–∏–∫–∏ –º–æ–≥—É—Ç –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è –ø–æ —Å—Å—ã–ª–∫–µ –∏–ª–∏ –≤–≤–µ–¥—è –∫–æ–¥ –Ω–∞ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ</p>
            </div>
        </div>
    </div>
</div>

<!-- Permission Modal -->
<div id="permissionModal" class="modal" style="display: block;">
    <div class="modal-content">
        <div class="modal-header">
            <h3>üé• –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –≤–∏–¥–µ–æ–∫–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü–∏—é!</h3>
        </div>
        <div class="modal-body">
            <div class="permission-hero">
                <div class="hero-icon">üé¨</div>
                <h3>–ì–æ—Ç–æ–≤—ã –Ω–∞—á–∞—Ç—å –≤—Å—Ç—Ä–µ—á—É?</h3>
            </div>

            <p class="permission-description">
                –î–ª—è –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–π —Ä–∞–±–æ—Ç—ã –≤–∏–¥–µ–æ–∫–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü–∏–∏ –Ω–∞–º –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è –¥–æ—Å—Ç—É–ø –∫:
            </p>

            <div class="permission-features">
                <div class="permission-feature">
                    <div class="feature-icon">üìπ</div>
                    <div class="feature-info">
                        <div class="feature-title">–ö–∞–º–µ—Ä–∞</div>
                        <div class="feature-description">–î–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ –≤–∏–¥–µ–æ</div>
                    </div>
                </div>

                <div class="permission-feature">
                    <div class="feature-icon">üé§</div>
                    <div class="feature-info">
                        <div class="feature-title">–ú–∏–∫—Ä–æ—Ñ–æ–Ω</div>
                        <div class="feature-description">–î–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ –∑–≤—É–∫–∞</div>
                    </div>
                </div>
            </div>

            <div class="permission-actions">
                <button id="startMedia" class="btn-primary">
                    üé¨ –†–∞–∑—Ä–µ—à–∏—Ç—å –∏ –Ω–∞—á–∞—Ç—å
                </button>
                <button id="cancelJoin" class="btn-secondary">
                    –û—Ç–º–µ–Ω–∞
                </button>
            </div>
        </div>
    </div>
</div>

<script src="/webjars/sockjs-client/1.5.1/sockjs.min.js"></script>
<script src="/webjars/stomp-websocket/2.3.4/stomp.min.js"></script>
<script src="/js/room.js"></script>
</body>
</html>